{% extends "base.html" %}
{% block maincontents %}


<div class="container">

  <div class="starter-template">
    <p class="lead">安全信息查询</p>
  </div>

</div><!-- /.container -->

<div class="container">
    <table id="table" data-show-columns="true" data-pagination="true" data-page-size="15" data-page-list="[15,30,66,100]" data-show-pagination-switch="true" data-search="true">
    </table>
</div><!-- /.container -->

<script>
    var $table = $('#table');

    $(function () {
        
        data = {{ json_data | safe}};

        columns_attr = new Object();
        var columns_arr = new Array();
        for(var key in data[0])
        {
            columns_attr = new Object();
            columns_attr.title = key;
            columns_attr.field = key;
            columns_attr.sortable = 'true';
            columns_arr.push(columns_attr);
        }

        $table.bootstrapTable({
            data: data,
            columns: columns_arr,
            height: getHeight()
        });

        $(window).resize(function () {
            $table.bootstrapTable('resetView', {
                height: getHeight()
            });
        });

    });

    function getHeight() {
        return $(window).height() - $('h3').outerHeight(true);
    }
</script>

{% endblock %}